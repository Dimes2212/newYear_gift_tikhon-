:root{
    --bg1:#0b0f17;
    --bg2:#0f1b2d;
    --paper:#f7f4ef;
    --ink:#0f1220;
    --env:#b7d6d6;
    --env2:#9fc6c6;
    --shadow: rgba(0,0,0,.25);
    --accent:#ffffff;
  }
  
  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue";
    color: var(--accent);
    background: radial-gradient(1200px 600px at 50% 10%, #1f3a64 0%, var(--bg2) 35%, var(--bg1) 100%);
    overflow-x:hidden;
  }
  
  .scene{
    min-height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:flex-start;
    gap:10px;
    padding:32px 18px 90px;
    position:relative;
  }
  
  .glow{
    position:absolute;
    width:520px;
    height:520px;
    border-radius:50%;
    top:-120px;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.18), rgba(255,255,255,0) 60%);
    filter: blur(2px);
    pointer-events:none;
  }
  
  .title{
    margin: 14px 0 0;
    text-align:center;
    font-weight:700;
    font-size: clamp(18px, 3.3vw, 30px);
    line-height:1.15;
    max-width: 900px;
  }
  
  .subtitle{
    margin:0 0 14px;
    opacity:.85;
    font-size: 14px;
  }
  
  /* Envelope wrapper */
  .envelope-wrap{
    width:min(520px, 92vw);
    display:flex;
    justify-content:center;
  }
  
  /* Button that holds the envelope */
  .envelope{
    width: min(520px, 92vw);
    aspect-ratio: 16/11;
    border:0;
    background: transparent;
    padding:0;
    position:relative;
    cursor:pointer;
    transform: translateZ(0);
    filter: drop-shadow(0 22px 30px rgba(0,0,0,.35));
    transition: transform .25s ease;
  }
  .envelope:hover{ transform: translateY(-2px); }
  .envelope:active{ transform: translateY(1px) scale(.99); }
  .envelope:focus-visible{
    outline: 2px solid rgba(255,255,255,.55);
    outline-offset: 6px;
    border-radius: 18px;
  }
  
  /* Letter */
  .letter{
    position:absolute;
    left: 10%;
    width: 80%;
    height: 75%;
    bottom: 12%;
    background: var(--paper);
    border-radius: 14px;
    box-shadow: 0 8px 18px rgba(0,0,0,.18);
    transform: translateY(40%) scale(.98);
    opacity:0;
    pointer-events:none;
    transition: transform .7s cubic-bezier(.2,.9,.2,1), opacity .4s ease;
    z-index:1;
  }
  .letter-inner{
    height:100%;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    padding: 18px 16px;
    gap: 10px;
    color: var(--ink);
    text-align:center;
  }
  .badge{
    width:44px;height:44px;
    border-radius:14px;
    display:grid;
    place-items:center;
    background: rgba(15,18,32,.06);
  }
  .letter-title{
    font-size: 22px;
    font-weight: 800;
  }
  .letter-text{
    font-size: 14px;
    opacity:.9;
  }
  .download{
    margin-top: 6px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    padding: 12px 16px;
    border-radius: 999px;
    background: #0f1220;
    color:#fff;
    text-decoration:none;
    font-weight:700;
    box-shadow: 0 10px 18px rgba(0,0,0,.18);
    transition: transform .15s ease, opacity .15s ease;
  }
  .download:hover{ transform: translateY(-1px); }
  .download:active{ transform: translateY(1px); }
  
  .hint{
    margin-top: 6px;
    font-size: 12px;
    opacity:.75;
  }
  .hint code{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
  
  /* Envelope parts */
  .env-body{
    position:absolute;
    inset: 18% 10% 18% 10%;
    background: linear-gradient(135deg, var(--env), var(--env2));
    border-radius: 18px;
    z-index: 2;
  }
  
  .env-front{
    position:absolute;
    inset: 18% 10% 18% 10%;
    border-radius: 18px;
    z-index: 4;
    background:
      linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,0) 55%),
      linear-gradient(135deg, rgba(0,0,0,.06), rgba(0,0,0,0) 40%);
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
  
    /* треугольники "клапанов" */
  }
  .env-front::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:18px;
    background: linear-gradient(135deg, rgba(0,0,0,.10), rgba(0,0,0,0) 55%);
    clip-path: polygon(0 0, 50% 52%, 0 100%);
    opacity:.9;
  }
  .env-front::after{
    content:"";
    position:absolute;
    inset:0;
    border-radius:18px;
    background: linear-gradient(225deg, rgba(0,0,0,.08), rgba(0,0,0,0) 55%);
    clip-path: polygon(100% 0, 50% 52%, 100% 100%);
    opacity:.9;
  }
  
  /* Top flap (opens) */
  .env-flap{
    position:absolute;
    left:10%;
    right:10%;
    top:18%;
    height: 48%;
    background: linear-gradient(135deg, #c9e1e1, #a9d0d0);
    border-radius: 18px;
    transform-origin: 50% 0%;
    transform: rotateX(0deg);
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    z-index: 5;
    transition: transform .75s cubic-bezier(.2,.9,.2,1);
    box-shadow: 0 10px 18px rgba(0,0,0,.10);
  }
  
  /* Seal */
  .seal{
    position:absolute;
    left:50%;
    top: 52%;
    transform: translate(-50%,-50%);
    width: 52px;
    height: 52px;
    border-radius: 999px;
    background: rgba(15,18,32,.92);
    color:#fff;
    display:grid;
    place-items:center;
    font-weight:800;
    z-index: 6;
    box-shadow: 0 12px 18px rgba(0,0,0,.22);
    transition: transform .25s ease, opacity .25s ease;
  }
  
  /* Open state */
  .envelope.is-open .env-flap{
    transform: rotateX(170deg);
  }
  .envelope.is-open .seal{
    opacity:0;
    transform: translate(-50%,-60%) scale(.9);
  }
  .envelope.is-open .letter{
    opacity:1;
    transform: translateY(-8%) scale(1);
    pointer-events:auto;
  }
  
  /* Bottom road */
  .road{
    position: fixed;
    left:0;
    right:0;
    bottom:0;
    height: 86px;
    background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.22) 25%, rgba(0,0,0,.55));
    display:flex;
    align-items:flex-end;
    justify-content:center;
    pointer-events:none;
  }
  .lane{
    width:100%;
    height: 42px;
    background: linear-gradient(90deg, rgba(255,255,255,.14) 0 20px, rgba(255,255,255,0) 20px 44px);
    background-size: 44px 100%;
    border-top: 1px solid rgba(255,255,255,.08);
    opacity: .55;
    position:absolute;
    bottom: 14px;
  }
  
  /* Kart (simple CSS illustration) */
  .kart{
    position:absolute;
    bottom: 16px;
    left: -140px;
    width: 120px;
    height: 44px;
    transform: translateX(0);
    animation: drive 6.5s linear infinite;
    pointer-events:none;
    filter: drop-shadow(0 10px 12px rgba(0,0,0,.35));
  }
  .kart-body{
    position:absolute;
    left: 18px;
    top: 16px;
    width: 84px;
    height: 18px;
    border-radius: 12px;
    background: rgba(255,255,255,.92);
  }
  .driver{
    position:absolute;
    left: 54px;
    top: 6px;
    width: 26px;
    height: 18px;
    border-radius: 12px 12px 10px 10px;
    background: rgba(255,255,255,.8);
  }
  .wheel{
    position:absolute;
    bottom: 0px;
    width: 20px;
    height: 20px;
    border-radius: 999px;
    background: rgba(255,255,255,.15);
    border: 3px solid rgba(255,255,255,.85);
    animation: spin .55s linear infinite;
  }
  .w1{ left: 18px; }
  .w2{ right: 16px; }
  
  @keyframes spin{
    to { transform: rotate(360deg); }
  }
  @keyframes drive{
    0% { transform: translateX(0); }
    100% { transform: translateX(calc(100vw + 220px)); }
  }
  
  /* Small footer */
  .footer-note{
    margin-top: 10px;
    opacity:.7;
    font-size: 12px;
  }
  
  @media (prefers-reduced-motion: reduce){
    .kart{ animation: none; left: 18px; }
    .wheel{ animation: none; }
    .env-flap, .letter{ transition: none; }
  }
  